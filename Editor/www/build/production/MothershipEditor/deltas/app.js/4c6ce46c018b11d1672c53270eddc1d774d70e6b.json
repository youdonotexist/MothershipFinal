["/*65d015d97127f09e7444af01dc59309745236b49",42,308872,"SegmentedButton",523823,32,"egmentedbutton",438496,37,"segmentedbutton\",",266409,42,"ed\",allowMultiple:false,allowDepress:false,allowToggle:true,pressedButtons:[]",511007,38,"defaultType:\"button\"",298943,52,"on({delegate:\"> button\",scope:a,tap:\"onButtonRelease\"});a.onAfter({delegate:\"> button\",scope:a,hide:\"onButtonHiddenChange\",show:\"onButtonHiddenChange\"})},updateAllowMultiple:function(a){if(!this.initialized&&!this.getInitialConfig().hasOwnProperty(\"allowDepress\")&&a){this.setAllowDepress(true)}},applyItems:function(){var e=this,f=[],d,b,c,a;e.callParent(arguments);a=this.getItems();d=a.length;for(b=0;b<d;b++){c=a.items[b];if(c.getInitialConfig(\"pressed\")){f.push(a.items[b])}}e.updateFirstAndLastCls(a);e.setPressedButtons(f)},onButtonRelease:function(a){if(!this.getAllowToggle()){return}var d=this,e=d.getPressedButtons()||[],c=[],b;if(!d.getDisabled()&&!a.getDisabled()){if(d.getAllowMultiple()){c=e.concat(c)}b=(c.indexOf(a)!==-1)||(e.indexOf(a)!==-1);if(b&&d.getAllowDepress()){Ext.Array.remove(c,a)}else{if(!b||!d.getAllowDepress()){c.push(a)}}d.setPressedButtons(c)}},onItemAdd",243951,44,"updateFirstAndLastCls(this.getItems())},onItemRemove",243951,44,"updateFirstAndLastCls(this.getItems())},onButtonHiddenChange:function(){this.updateFirstAndLastCls(this.getItems())},updateFirstAndLastCls:function(b){var e=b.length,f=Ext.baseCSSPrefix,a=f+\"first\",g=f+\"last\",d,c;for(c=0;c<e;c++){d=b.items[c];d.removeCls(a);d.removeCls(g)}for(c=0;c<e;c++){d=b.items[c];if(!d.isHidden()){d.addCls(a);break}}for(c=e-1;c>=0;c--){d=b.items[c];if(!d.isHidden()){d.addCls(g);break}}},applyPressedButtons:function(a){var e=this,f=[],c,d,b;if(e.getAllowToggle()){if(Ext.isArray(a)){d=a.length;for(b=0;b<d;b++){c=e.getComponent(a[b]);if(c&&f.indexOf(c)===-1){f.push(c)}}}else{c=e.getComponent(a);if(c&&f.indexOf(c)===-1){f.push(c)}}}return f},updatePressedButtons:function(j,c){var h=this,g=h.getItems(),k=h.getPressedCls(),m=[],l,b,f,a,d;f=g.length;if(c&&c.length){for(a=0;a<f;a++){l=g.items[a];if(c.indexOf(l)!=-1&&j.indexOf(l)==-1){l.removeCls([k,l.getPressedCls()]);m.push({item:l,toggle:false})}}}f=j.length;for(a=0;a<f;a++){b=j[a];if(!c||c.indexOf(b)==-1){b.addCls(k);m.push({item:b,toggle:true})}}f=m.length;if(f&&c!==undefined){Ext.defer(function(){for(a=0;a<f;a++){d=m[a];h.fireEvent(\"toggle\",h,d.item,d.toggle)}},50)}},isPressed:function(a){var b=this.getPressedButtons();return b.indexOf(a)!=-1},doSetDisabled:function(a){var b=this;b.items.each(function(c){c.setDisabled(a)},b);b",534400,55,"TitleBa",523822,32,308953,275921,"deathCry",584871,50,"asteroidBattle\",\"smallLaserFireRate\",\"bossBattl",584917,134,",\"turretFrequency\",\"chargeLaserDamage\",\"teleportCount\",\"maxGravityMines\",\"maxReflectShields\",\"empMissileSpeed\",\"reactiveTeleportDuration",585050,295,"storyLine\",\"storyTeller\",\"storyTellerId\",\"storyTellerIndex",585342,2601,587856,32,"DeathCry\",width:\"100%\",height:\"4em\",placeHolder:\"Death Text",604320,41,587982,57,"fullscreen:true,",588039,1034,"c",589083,699,355088,37,"callParent(arguments)",589780,1166,",store:",606974,35,594800,63,"a){return a",594874,61,"b,a){var f=b.get(\"story\"),d=a.get(\"story\");if(f&&d){var e=b.get(\"index\"),c=a.get(\"index\");return e>c?1:(e===c?0:-1)}else{var e=b.get(\"name\"),c=a.get(\"name\");return e>c?1:(e==c?0:-1)}},direction:\"ASC\"}]}",588636,53,590999,379,260319,33,608592,35,591419,47,"},pop:function(c){",591537,100,"Disappear(b)}this.callParent(arguments);b=this.getActiveItem();",591568,811,"CardWillDisappear:function(a){",592375,75,"springboard.Springboard",588107,59,"springboardcard\",controller:\"SpringboardController\",config:{",303986,33,",align:\"center\"},height:\"100%",623428,32,"90%\",text:\"Battle Editor\",cls:\"ms-add-button\",flex:1,action:\"battle_editor\",margin:\"1em\"},{xtype:\"button\",width:\"90%\",text:\"Upgrades Editor\",cls:\"ms-add-button\",flex:1,action:\"minion_editor\",margin:\"1e",594224,37,"view.upgradelist.UpgradeList",622990,64,"upgrade",586124,273,586471,244,"type\")",621728,34,"view.upgradelist.UpgradeList",588107,59,"upgradelistcard\",controller:\"UpgradesController\",config:{layout:{type:\"vbox\"},height:\"100%\",items:[{width:\"100%\",xtype:\"segmentedbutton\",docked:\"top\",pressedButtons:[0],items:[{itemId:\"minion\",text:\"Minion\",flex:1},{itemId:\"mothership\",text:\"Mothership\",flex:1}]},{xtype:\"list\",itemId:\"upgrades",589397,151,"upgradelistdataitem\",flex:1",589615,76,"action:\"save",613668,63,"Springboard",617983,71,"control:{\"springboardcard button[action=minion_editor]\":{tap:\"onEditMinions\"},\"springboardcard button[action=battle_editor]\":{tap:\"onEditBattles\"},\"button[action=bundlify]\":{tap:\"onBundleify",615936,40,301119,37,595145,51,"Bundlify!\",action:\"bundlify\"});a.add({xtype:\"button\",text:\"Bundle: ?\",action:\"noaction\"});Ext.Ajax.request({url:\"/latestBundle\"",586874,93,"f){var e=JSON.parse(f.responseText);c.getNavigation().down(\"button[action=noaction]\").setText(\"Bundle: \"+e.value)}})},onEditMinion",603392,73,"upgradelist.UpgradeListCard\",{title:\"Upgrades Editor\"}))},onEditBattl",603391,75,"ome.HomeCard\",{title:\"Mothership Editor\"}))},onBundleify:function(a){Ext.Ajax.request({url:\"/bundle\"",586874,93,"c){var b=c.responseText;if(b==\"Success!\"){Ext.Ajax.request({url:\"/latestBundle\"",586874,102,"JSON.parse(e.responseText);Ext.Msg.alert(\"Success!\",\"New Bundle Id:\"+d.value,function(f){})}})}},failure:function(b){Ext.Msg.alert(\"Failure!\",\"Someting bad happen.\",function(c){})}}",621728,34,592445,1491,"Hero One-Liner",593839,50,"story",588304,38,593936,760,367420,34,618927,73,595211,4383,"_directives\",cls:\"ms-add-button",604320,50,599644,100,"title:\"Add Hero",599742,80,599999,63,"selectfield\",style:\"border-width: 1px; border-style: solid; border-radius: 5px;\",defaultPhonePickerConfig:{zIndex:100},defaultTabletPickerConfig:{zIndex:100},width:\"100%\",displayField:\"name\",valueField:\"type\",autoSelect:true,hidden:false},",600054,298,"this.down(\"selectfield\").setHidden(false)}else{this.down(\"selectfield\").setHidden(true)",584032,34,600392,598,"#heroNameLabel\":{change:\"onChangeName",600986,353,"b,e",303504,33,"c=b.down(\"#heroNameLabel\"),a=b.down(\"#heroDeathCry\");c",615519,34,"Hero.get(\"name\")",615516,37,"Hero.get(\"deathCry\"));var d=b",601462,70,"d",601533,102,"d.hide();d.show()}else{d",601533,47,601706,39,"d.hide();d.show()}d",601764,1569,"d){var b=d.up(\"#heropanel\"),c=b.down(\"#heroNameLabel\"),a=b.down(\"#heroDeathCry\");",603273,40,"c.getValue());",603273,34,"deathCry\",a.getValue());",603336,308,"AI",603659,36,"this;Ext.Msg.confirm(\"Delete?\",\"This can't be un-done (unless you're good friends with the dev)\",function(b){if(b==\"yes\"",615007,45,"eroListController\"),d=c.getHeroList().getStore();d",615098,32,603814,43,625195,33,";a.getNavigation().pop()}}",621728,34,603916,1987,"addherobasicworkflow selectfield\":{change:\"onHeroTyp",605892,136,"b,e",367418,36,";if(e){var d=c.getHeroList();d.setStore(",606974,35,"\",storeId:\"hero_type\",autoLoad:true",585456,34,"/",607072,36,606251,50,"}",618928,72,606421,45,"h",606467,42,"g",607152,57,",",595823,41,"\"),f=b.down(\"fieldset\"),d=b.down(\"selectfield\");e",606634,72,"e",606707,60,"f.setRecord(e);g.addWorkflowData(\"HeroBuilder\",e);b.buildFromHero(e);d.setOptions([{name:\"Basic\",type:\"BASIC\"},{name:\"Juggernaut\",type:\"JUGGERNAUT\"},{name:\"Scientist\",type:\"SCIENTIST\"},{name:\"Mixed\",type:\"MIXED\"}]",606834,110,"g",607152,57,",c=g",608859,32,"console.log(c.get(\"hero_type_id",622160,69,607005,69,"c",607104,40,"i){var j",607152,78,"i,j",607233,1700,625195,33,";b.save(function(){a.getStore().add(b)}",608960,104,"HeroTypeChange:function(a,e,b){if(",606654,50,"!=\"MIXED\"){return}var d",607152,57,",c",608857,34,"console.log(\"Doing this in the hero type change section\");console.log(c);console.log(e);c.set(\"hero_type_id",609056,689,"hidden:true",609744,1777,"modalWindow.setTitle(d?d.title:\"Loading..\"",611517,2203,"view.battle.Story",588107,45,"xtype:\"storycard\",controller:\"S",613370,55,"Hero One-Liner",613441,44,596925,40,"abel:\"Leader\",autoSelect:true},{html:\"Hero One-Liner\",cls:\"hero-heading\",height:\"1",613472,33,"itemId:\"storyliner\",placeHolder:\"Hero One-Liner",613534,125,613663,210,"story]\":{tap:\"onEditS",613902,44,613873,302,",\"button[action=arcadify]\":{tap:\"onArcadifyButton",605997,33,"e",303504,33,"d=c.down(\"image\"),b=c.down(\"textfield\");d",586730,57,606654,51,");b",615519,46,"name\"",618925,60,"Arcadify!\",action:\"arcadify\"})},onArcadifyButton:function(a){Ext.Ajax.request({url:\"/herolist/export/",607072,36,586870,97,"c){var b=c.responseText;if(b==\"SUCCESS!\"){Ext.Msg.alert(\"Success!\",\"This battle has been exported to Arcade mode. Refresh page to see updates.\",function(d){})}},failure:function(b){Ext.Msg.alert(\"Failure!\",\"Someting bad happen.\",function(c){})}}",614444,295,"Backstory\"}))},onEditS",614626,90,"StoryCard\",{title:\"One-Liner",614750,149,"Edit Heroes",614910,96,"f){var d=this,c",607152,37,615051,35,"Ext.Msg.confirm(\"Delete?\",\"This can't be un-done (unless you're good friends with the dev)\",function(e){if(e==\"yes\"){",615086,72,"d.getNavigation().pop()}}",621728,45,615228,538,"Story",617983,71,"control:{\"storycard #storyliner",615345,50,"storycard #storyteller\":{change:\"onTellerChange\",keyup:\"onTellerChange\"},\"storycard button[action=save_story]\":{tap:\"onSave\"},\"storycard selectfield\":{change:\"onTellerChang",615935,32,"c,d){var b=c.down(\"#storyliner\"),a=c.down(\"selectfield\");b",615519,46,"storyLine\"));a.setDisplayField(\"name\");a.setValueField(\"id\");a.setStore(",606974,35,"\",storeId:\"hero_type\",autoLoad:true",585456,34,"/",607072,36,606251,50,615577,64,"storyLine\",a.getValue())},onTellerChange:function(b,g,e){var f=b.getDisplayField();if(!e){var h=",606654,36,"storyTellerId\");if(!h){h=b.getStore().getAt(0).get(\"id\")}b.setValue(h)}var d=b.getStore(),a=d.findExact(b.getValueField(),b.getValue()),c=b.getRecord();if(!c){c=d.getAt(0);b.setRecord(c)}",614558,36,"storyTeller\",c.get(f));",614558,36,"storyTellerId\",b.getValue());",614558,36,"storyTellerIndex\",a",615664,2262,",title:\"Add Directive\"",591072,32,617958,376,"save_directives]\":{tap:\"onSaveDirectives",618316,64,"button[action=delete_all]\":{tap:\"onDeleteAllDirectives",618376,521,"sorters:\"order\",autoLoad:true,autoSync:fals",618923,62,"Delete All\",action:\"delete_all\"}",595166,45,619000,302,619307,1189,620816,58,"},getDirectiveList:function(){return this.getCard().down(\"dataview\"",607799,42,620636,238,620908,168,",{title:\"Add Directive\"}",621076,44,"b){if(b",621127,34,"d",607152,57,",c",621221,33,"e=d",621257,37,"c.getStore().add(e);c.getStore().sync();d.closeModal()}else{var c=this.getDirectiveDataView(),f=c.getStore().data.items;for(var a=0;a<f.length;a++){var e=f[a];e.set(\"order\",a)}c",621369,61,";Ext.Msg.confirm(\"Delete?\",\"This can't be un-done (unless you're good friends with the dev)\",function(c){if(c==\"yes\"){var d=b.getDirectiveDataView();d",621455,54,"d.getStore().sync();b.getNavigation().pop()}})},onDeleteAllDirectives:function(a){var b=this;Ext.Msg.confirm(\"Delete?\",\"This can't be un-done (unless you're good friends with the dev)\",function(c){if(c==\"yes\"){var d=b.getDirectiveDataView();d.getStore().removeAll();d.getStore().sync()}}",621534,196,",onSaveDirectives:function(b){var c=this.getDirectiveDataView(),e=c.getStore().data.items;for(var a=0;a<e.length;a++){var d=e[a];d.set(\"order\",a)}c",590571,51,621762,222,",\"directivecard",618400,53,621984,747,"j.action=k.get(\"action\"",622729,64,"DirectiveTypeChange:function(d,c,a,b){if",622400,35,620112,34,".set(\"action\",c.action",622787,35,"if",622400,35,620112,34,".set(\"waitAfter\",b)}},onSaveDirective:function(){if",622400,35,620112,34,".save()",584032,40,"UpgradeLevel",583808,41,"\"id\",\"title\",\"description\",\"damage\",\"cost\",\"speed\",\"life\",\"reload\",\"index\"]",583760,39,"Upgrad",583807,83,"type\",\"usage\",\"component",585342,47,"levels",589564,32,"UpgradeLevel\",associationKey:\"levels\"}],proxy:{type:\"rest\",url:\"/upgrades\"",584032,34,"view.upgradelist.UpgradeEdit",588107,59,"upgradeeditcard\",controller:\"UpgradesController\",config:{layout:{type:\"vbox\"},height:\"100%\",items:[",589630,61,"action:\"save\",docked:\"bottom\"}]},constructor:function(c){var e=this;e.callParent(arguments);var b=e.getRecord(),f=b.levels();e.removeAll();for(var d=0;d<f.getAllCount();d++",591965,42,"upgradelist.UpgradeEditorView\",{record:f.getAt(d)});e.add(a)",584032,34,"controller.Upgrad",617981,79,"upgradeList:\"upgradelistcard dataview\"},control:{upgradeList:{itemtap:\"onUpgradeTap\"},\"upgradelistcard",600575,37,"\"upgradeeditcard",600575,37,"\"upgradelistcard segmentedbutton\":{toggle:\"onChangeSegmen",605996,32,"a,d){var b=this;b.callParent(arguments);if(a.xtype==\"upgradelistcard\"){if(d){var c=b.getUpgradeList",594751,45,"Upgrade\",autoLoad:true,storeName:\"minion_upgrade_store\",proxy:{type:\"rest\",url:\"/upgrades/minion\",reader:{type:\"json\"}}})}}},onUpgradeTap:function(f,c,i,b,h",591963,44,"upgradelist.UpgradeEditCard\",{record:b});this.currentUpgrade=b;var g=Ext.getCmp(\"navigation_root\");g.push(a)},onChangeSegment:function(e,c,a,b){var f=this.getUpgradeList(),d=c.getItemId();if(a){f",594755,41,"Upgrade\",autoLoad:true,storeName:\"minion_upgrade_store\",proxy:{type:\"rest\",url:\"/upgrades/\"+d,reader:{type:\"json\"}}})}},onSave:function(a){this.currentUpgrade.saveAssociations=true;this.currentUpgrade.save(",621728,34,622976,1241,"SpringboardController\",",624216,118,"S",624317,116,",\"Upgrades",624422,634,"springboard.Springboard",625065,62,"a.push(c);b.onCardWillAppear",625155,73,";this.applyOverrides()},applyOverrides:function(){Ext.data.writer.Json.override({getRecordData:function(g){var k=this,f,d,j,e=g.data;if(g.saveAssociations){for(f=0;f<g.associations.length;f++){d=g.associations.get(f);e[d._associationKey]=null;j=g[d._storeName];j.each(function(i){if(!e[d._associationKey]){e[d._associationKey]=[]}var q=this.getRecordData.call(this,i);if(i.dirty|i.phantom|(q!=null)){e[d._associationKey].push(q);g.setDirty()}},k);Ext.each(j.removed,function(q){q.set(\"forDeletion\",true);var i=this.getRecordData.call(this,q);e[d._associationKey].push(i);g.setDirty()},k)}}var o=g.phantom===true,c=this.getWriteAllFields()||o,b=this.getNameProperty(),h=g.getFields(),m,a,l,p,n;if(c){h.each(function(i){if(i.getPersist()){a=i.config[b]||i.getName();n=g.get(i.getName());if(i.getType().type==\"date\"){n=this.writeDate(i,n)}e[a]=n}},this)}else{m=g.getChanges();for(p in m){if(m.hasOwnProperty(p)){l=h.get(p);if(l.getPersist()){a=l.config[b]||l.getName();n=m[p];if(l.getType().type==\"date\"){n=this.writeDate(l,n)}e[a]=n}}}if(!o){e[g.getIdProperty()]=g.getId()}}return e}})",625228,206,588064,34,"upgradelist.UpgradeEditorView\",{extend:Ext.Container,config:{width:\"100%\",height:\"15em\",items:[{height:\"10%\",itemId:\"level_container\",html:\"Level 1",239247,40,"white\"},{layout:\"hbox\",items:[{layout:\"vbox\",flex:1,items:[",593669,32,"Name\",itemId:\"title",613474,44,"Description",613534,49,",itemId:\"description\"}]},{layout:\"vbox\",flex:1,items:[",593669,32,"Cost\",label:\"C\",itemId:\"cost\"",592816,34,"Damage\",label:\"D\",itemId:\"damage\"",592816,34,"Life\",label:\"L\",itemId:\"life\"",592816,34,"Speed\",label:\"S\",itemId:\"speed\"",592816,34,"Reload\",label:\"R\",itemId:\"reload\"}]}]}]},constructor:function(c){var e=this;e.callParent(arguments);var a=[e.down(\"#title\"),e.down(\"#description\"),e.down(\"#cost\"),e.down(\"#damage\"),e.down(\"#life\"),e.down(\"#speed\"),e.down(\"#reload\")],g=e.down(\"#level_container\"),b=e.getRecord();for(var d=0;d<a.length;d++){var f=a[d];f.setValue(b.get(f.getItemId()));f.on(\"change\",function(i,h){b.set(i.getItemId(),h)})}g.setHtml(\"Level: \"+b.get(\"index\"))}});"]